<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>aberghammer.com — Design System Playground</title>
<style>
  :root {
    --ui-bg: #1a1a1a;
    --ui-surface: #242424;
    --ui-border: #333;
    --ui-text: #e0e0e0;
    --ui-text-muted: #888;
    --ui-accent: #7aa2f7;
    --ui-hover: #2a2a2a;
  }

  * { margin: 0; padding: 0; box-sizing: border-box; }

  body {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
    background: var(--ui-bg);
    color: var(--ui-text);
    font-size: 13px;
    line-height: 1.5;
    height: 100vh;
    overflow: hidden;
  }

  .layout {
    display: grid;
    grid-template-columns: 320px 1fr;
    grid-template-rows: auto 1fr auto;
    height: 100vh;
  }

  .toolbar {
    grid-column: 1 / -1;
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 8px 16px;
    border-bottom: 1px solid var(--ui-border);
    background: var(--ui-surface);
  }

  .toolbar h1 {
    font-size: 13px;
    font-weight: 600;
    letter-spacing: -0.01em;
  }

  .toolbar-actions {
    display: flex;
    gap: 8px;
    align-items: center;
  }

  .preset-btn {
    padding: 4px 10px;
    border: 1px solid var(--ui-border);
    border-radius: 4px;
    background: transparent;
    color: var(--ui-text-muted);
    font-size: 12px;
    cursor: pointer;
    transition: all 0.15s;
  }

  .preset-btn:hover {
    background: var(--ui-hover);
    color: var(--ui-text);
    border-color: #555;
  }

  .preset-btn.active {
    background: var(--ui-accent);
    color: #111;
    border-color: var(--ui-accent);
  }

  .controls {
    overflow-y: auto;
    border-right: 1px solid var(--ui-border);
    padding: 16px;
  }

  .control-group {
    margin-bottom: 20px;
  }

  .control-group-title {
    font-size: 11px;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    color: var(--ui-text-muted);
    margin-bottom: 12px;
    padding-bottom: 6px;
    border-bottom: 1px solid var(--ui-border);
  }

  .control-row {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 10px;
  }

  .control-row label {
    font-size: 12px;
    color: var(--ui-text-muted);
    flex-shrink: 0;
  }

  .control-row .value {
    font-family: 'SF Mono', 'Fira Code', monospace;
    font-size: 11px;
    color: var(--ui-accent);
    min-width: 60px;
    text-align: right;
  }

  input[type="range"] {
    -webkit-appearance: none;
    width: 120px;
    height: 4px;
    border-radius: 2px;
    background: var(--ui-border);
    outline: none;
    margin: 0 8px;
  }

  input[type="range"]::-webkit-slider-thumb {
    -webkit-appearance: none;
    width: 14px;
    height: 14px;
    border-radius: 50%;
    background: var(--ui-accent);
    cursor: pointer;
  }

  input[type="color"] {
    -webkit-appearance: none;
    width: 28px;
    height: 28px;
    border: 1px solid var(--ui-border);
    border-radius: 4px;
    cursor: pointer;
    background: transparent;
    padding: 2px;
  }

  input[type="color"]::-webkit-color-swatch-wrapper {
    padding: 0;
  }

  input[type="color"]::-webkit-color-swatch {
    border: none;
    border-radius: 2px;
  }

  select {
    background: var(--ui-surface);
    color: var(--ui-text);
    border: 1px solid var(--ui-border);
    border-radius: 4px;
    padding: 4px 8px;
    font-size: 12px;
    cursor: pointer;
    outline: none;
  }

  select:focus {
    border-color: var(--ui-accent);
  }

  .preview-area {
    overflow-y: auto;
    display: flex;
    justify-content: center;
    padding: 32px;
  }

  .preview-frame {
    width: 100%;
    max-width: 760px;
    min-height: 600px;
    border-radius: 8px;
    overflow: hidden;
    box-shadow: 0 4px 24px rgba(0,0,0,0.3);
    transition: all 0.2s;
  }

  .preview-inner {
    padding: 48px 24px;
    font-family: 'Inter', -apple-system, system-ui, sans-serif;
    transition: all 0.2s;
  }

  .preview-inner header {
    display: flex;
    justify-content: space-between;
    align-items: baseline;
    margin-bottom: 48px;
  }

  .preview-inner .site-name {
    font-weight: 600;
    transition: all 0.2s;
  }

  .preview-inner nav {
    display: flex;
    gap: 24px;
  }

  .preview-inner nav a {
    text-decoration: none;
    transition: all 0.2s;
  }

  .preview-inner .hero h1 {
    font-weight: 600;
    transition: all 0.2s;
  }

  .preview-inner .hero p {
    transition: all 0.2s;
  }

  .preview-inner .section-title {
    font-weight: 600;
    transition: all 0.2s;
    padding-bottom: 8px;
    margin-bottom: 16px;
  }

  .preview-inner .project {
    padding: 12px 0;
  }

  .preview-inner .project-title {
    font-weight: 500;
    transition: all 0.2s;
  }

  .preview-inner .project-desc {
    transition: all 0.2s;
  }

  .preview-inner .project-tags {
    transition: all 0.2s;
  }

  .preview-inner .footer-area {
    margin-top: 48px;
    padding-top: 16px;
    display: flex;
    gap: 24px;
    transition: all 0.2s;
  }

  .preview-inner .footer-area a {
    text-decoration: none;
    transition: all 0.2s;
  }

  .output-area {
    grid-column: 1 / -1;
    border-top: 1px solid var(--ui-border);
    background: var(--ui-surface);
    padding: 12px 16px;
    display: flex;
    align-items: flex-start;
    gap: 12px;
    max-height: 160px;
  }

  .output-area .prompt-text {
    flex: 1;
    font-family: 'SF Mono', 'Fira Code', monospace;
    font-size: 12px;
    line-height: 1.6;
    color: var(--ui-text);
    overflow-y: auto;
    max-height: 136px;
    white-space: pre-wrap;
  }

  .copy-btn {
    padding: 6px 14px;
    border: 1px solid var(--ui-border);
    border-radius: 4px;
    background: transparent;
    color: var(--ui-text);
    font-size: 12px;
    cursor: pointer;
    transition: all 0.15s;
    flex-shrink: 0;
    white-space: nowrap;
  }

  .copy-btn:hover {
    background: var(--ui-accent);
    color: #111;
    border-color: var(--ui-accent);
  }

  .copy-btn.copied {
    background: #2d8a4e;
    border-color: #2d8a4e;
    color: white;
  }

  .toggle-row {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 10px;
  }

  .toggle {
    position: relative;
    width: 36px;
    height: 20px;
    cursor: pointer;
  }

  .toggle input {
    display: none;
  }

  .toggle .slider {
    position: absolute;
    inset: 0;
    background: var(--ui-border);
    border-radius: 10px;
    transition: 0.2s;
  }

  .toggle .slider::before {
    content: '';
    position: absolute;
    height: 14px;
    width: 14px;
    left: 3px;
    bottom: 3px;
    background: white;
    border-radius: 50%;
    transition: 0.2s;
  }

  .toggle input:checked + .slider {
    background: var(--ui-accent);
  }

  .toggle input:checked + .slider::before {
    transform: translateX(16px);
  }

  .color-row {
    display: flex;
    align-items: center;
    gap: 8px;
    margin-bottom: 10px;
  }

  .color-row label {
    font-size: 12px;
    color: var(--ui-text-muted);
    flex: 1;
  }

  .color-row .hex {
    font-family: 'SF Mono', 'Fira Code', monospace;
    font-size: 11px;
    color: var(--ui-text-muted);
  }

  .divider {
    height: 1px;
    background: var(--ui-border);
    margin: 16px 0;
  }

  .context-switch {
    display: flex;
    gap: 4px;
    margin-bottom: 16px;
  }

  .context-btn {
    flex: 1;
    padding: 6px;
    border: 1px solid var(--ui-border);
    border-radius: 4px;
    background: transparent;
    color: var(--ui-text-muted);
    font-size: 11px;
    cursor: pointer;
    transition: all 0.15s;
    text-align: center;
  }

  .context-btn.active {
    background: var(--ui-hover);
    color: var(--ui-text);
    border-color: #555;
  }
</style>
</head>
<body>

<div class="layout">
  <div class="toolbar">
    <h1>aberghammer.com — Design System</h1>
    <div class="toolbar-actions">
      <button class="preset-btn active" onclick="applyPreset('current')">Current</button>
      <button class="preset-btn" onclick="applyPreset('tufte')">Tufte</button>
      <button class="preset-btn" onclick="applyPreset('bauhaus')">Bauhaus</button>
      <button class="preset-btn" onclick="applyPreset('warm')">Warm</button>
      <button class="preset-btn" onclick="applyPreset('tight')">Tight</button>
    </div>
  </div>

  <div class="controls">
    <!-- Context -->
    <div class="context-switch">
      <button class="context-btn active" onclick="setContext('light')" id="ctx-light">Light bg</button>
      <button class="context-btn" onclick="setContext('dark')" id="ctx-dark">Dark bg</button>
    </div>

    <!-- Colors -->
    <div class="control-group">
      <div class="control-group-title">Colors</div>
      <div class="color-row">
        <label>Text</label>
        <span class="hex" id="textColorHex">#1a1a1a</span>
        <input type="color" id="textColor" value="#1a1a1a" oninput="updateColor('textColor')">
      </div>
      <div class="color-row">
        <label>Background</label>
        <span class="hex" id="bgColorHex">#fafafa</span>
        <input type="color" id="bgColor" value="#fafafa" oninput="updateColor('bgColor')">
      </div>
      <div class="color-row">
        <label>Accent</label>
        <span class="hex" id="accentColorHex">#64748b</span>
        <input type="color" id="accentColor" value="#64748b" oninput="updateColor('accentColor')">
      </div>
      <div class="color-row">
        <label>Muted text</label>
        <span class="hex" id="mutedColorHex">#6b7280</span>
        <input type="color" id="mutedColor" value="#6b7280" oninput="updateColor('mutedColor')">
      </div>
      <div class="color-row">
        <label>Divider</label>
        <span class="hex" id="dividerColorHex">#e5e7eb</span>
        <input type="color" id="dividerColor" value="#e5e7eb" oninput="updateColor('dividerColor')">
      </div>
    </div>

    <!-- Typography -->
    <div class="control-group">
      <div class="control-group-title">Typography</div>

      <div class="control-row">
        <label>Font</label>
        <select id="fontFamily" onchange="updateState()">
          <option value="'Inter', system-ui, sans-serif" selected>Inter</option>
          <option value="'IBM Plex Sans', system-ui, sans-serif">IBM Plex Sans</option>
          <option value="system-ui, -apple-system, sans-serif">System UI</option>
          <option value="'Georgia', 'Times New Roman', serif">Georgia (serif)</option>
          <option value="'Literata', Georgia, serif">Literata</option>
        </select>
      </div>

      <div class="control-row">
        <label>Base size</label>
        <input type="range" id="baseFontSize" min="14" max="20" step="1" value="16" oninput="updateState()">
        <span class="value" id="baseFontSizeVal">16px</span>
      </div>

      <div class="control-row">
        <label>Heading scale</label>
        <input type="range" id="headingScale" min="1.5" max="3.0" step="0.1" value="2.25" oninput="updateState()">
        <span class="value" id="headingScaleVal">2.25×</span>
      </div>

      <div class="control-row">
        <label>Body line height</label>
        <input type="range" id="lineHeight" min="1.3" max="2.0" step="0.05" value="1.625" oninput="updateState()">
        <span class="value" id="lineHeightVal">1.625</span>
      </div>

      <div class="control-row">
        <label>Heading weight</label>
        <select id="headingWeight" onchange="updateState()">
          <option value="500">Medium (500)</option>
          <option value="600" selected>Semibold (600)</option>
          <option value="700">Bold (700)</option>
        </select>
      </div>

      <div class="control-row">
        <label>Letter spacing</label>
        <input type="range" id="letterSpacing" min="-0.05" max="0.02" step="0.005" value="-0.025" oninput="updateState()">
        <span class="value" id="letterSpacingVal">-0.025em</span>
      </div>
    </div>

    <!-- Spacing -->
    <div class="control-group">
      <div class="control-group-title">Spacing</div>

      <div class="control-row">
        <label>Container width</label>
        <input type="range" id="containerWidth" min="560" max="840" step="20" value="672" oninput="updateState()">
        <span class="value" id="containerWidthVal">672px</span>
      </div>

      <div class="control-row">
        <label>Section padding</label>
        <input type="range" id="sectionPadding" min="24" max="80" step="4" value="48" oninput="updateState()">
        <span class="value" id="sectionPaddingVal">48px</span>
      </div>

      <div class="control-row">
        <label>Horizontal padding</label>
        <input type="range" id="hPadding" min="16" max="48" step="4" value="24" oninput="updateState()">
        <span class="value" id="hPaddingVal">24px</span>
      </div>

      <div class="control-row">
        <label>Element gap</label>
        <input type="range" id="elementGap" min="4" max="24" step="2" value="12" oninput="updateState()">
        <span class="value" id="elementGapVal">12px</span>
      </div>
    </div>

    <!-- Details -->
    <div class="control-group">
      <div class="control-group-title">Details</div>

      <div class="toggle-row">
        <label style="font-size: 12px; color: var(--ui-text-muted);">Section dividers</label>
        <label class="toggle">
          <input type="checkbox" id="showDividers" checked onchange="updateState()">
          <span class="slider"></span>
        </label>
      </div>

      <div class="toggle-row">
        <label style="font-size: 12px; color: var(--ui-text-muted);">Footer border</label>
        <label class="toggle">
          <input type="checkbox" id="showFooterBorder" checked onchange="updateState()">
          <span class="slider"></span>
        </label>
      </div>

      <div class="control-row">
        <label>Nav style</label>
        <select id="navStyle" onchange="updateState()">
          <option value="text" selected>Plain text</option>
          <option value="muted">Muted</option>
          <option value="accent">Accent color</option>
        </select>
      </div>

      <div class="control-row">
        <label>Tag separator</label>
        <select id="tagSeparator" onchange="updateState()">
          <option value=" · " selected>· (middle dot)</option>
          <option value=" / ">/ (slash)</option>
          <option value=", ">, (comma)</option>
          <option value="  ">  (space)</option>
        </select>
      </div>
    </div>
  </div>

  <div class="preview-area" id="previewArea">
    <div class="preview-frame" id="previewFrame">
      <div class="preview-inner" id="preview">

        <header>
          <span class="site-name">Anthony Berghammer</span>
          <nav>
            <a href="#" class="nav-link">Home</a>
            <a href="#" class="nav-link">Resume</a>
          </nav>
        </header>

        <section class="hero" style="margin-bottom: 48px;">
          <h1 style="margin-bottom: 16px;">AI Engineer</h1>
          <p class="hero-desc">Building tools at the intersection of language models and software engineering. Currently focused on agent systems and developer tooling.</p>
        </section>

        <section class="projects-section">
          <h2 class="section-title">Selected Projects</h2>

          <div class="project">
            <div class="project-title">Claude Code Plugins</div>
            <p class="project-desc">Framework for extending Claude Code with custom tools, hooks, and commands.</p>
            <div class="project-tags">TypeScript · Astro · LLM APIs</div>
          </div>

          <div class="project" style="margin-top: 8px;">
            <div class="project-title">Semantic Search Engine</div>
            <p class="project-desc">Vector-based document retrieval with natural language queries over large corpora.</p>
            <div class="project-tags">Python · FAISS · Transformers</div>
          </div>
        </section>

        <section class="experience-section" style="margin-top: 48px;">
          <h2 class="section-title">Experience</h2>
          <div class="project">
            <div style="display: flex; justify-content: space-between; align-items: baseline;">
              <div>
                <span class="project-title">AI Engineer</span>
                <span class="project-desc"> · Anthropic</span>
              </div>
              <span class="project-tags" style="flex-shrink: 0;">2024 – Present</span>
            </div>
            <p class="project-desc" style="margin-top: 4px;">Working on developer tools and agent infrastructure.</p>
          </div>
        </section>

        <div class="footer-area">
          <a href="#">Email</a>
          <a href="#">GitHub</a>
          <a href="#">LinkedIn</a>
        </div>
      </div>
    </div>
  </div>

  <div class="output-area">
    <div class="prompt-text" id="promptOutput">Adjust controls to generate a prompt...</div>
    <button class="copy-btn" id="copyBtn" onclick="copyPrompt()">Copy Prompt</button>
  </div>
</div>

<script>
const DEFAULTS = {
  textColor: '#1a1a1a',
  bgColor: '#fafafa',
  accentColor: '#64748b',
  mutedColor: '#6b7280',
  dividerColor: '#e5e7eb',
  fontFamily: "'Inter', system-ui, sans-serif",
  baseFontSize: 16,
  headingScale: 2.25,
  lineHeight: 1.625,
  headingWeight: '600',
  letterSpacing: -0.025,
  containerWidth: 672,
  sectionPadding: 48,
  hPadding: 24,
  elementGap: 12,
  showDividers: true,
  showFooterBorder: true,
  navStyle: 'text',
  tagSeparator: ' · ',
  context: 'light'
};

const state = { ...DEFAULTS };

const PRESETS = {
  current: { ...DEFAULTS },
  tufte: {
    textColor: '#111111',
    bgColor: '#fffff8',
    accentColor: '#8b0000',
    mutedColor: '#555555',
    dividerColor: '#ddd8c8',
    fontFamily: "'Georgia', 'Times New Roman', serif",
    baseFontSize: 17,
    headingScale: 2.0,
    lineHeight: 1.7,
    headingWeight: '500',
    letterSpacing: 0,
    containerWidth: 640,
    sectionPadding: 56,
    hPadding: 24,
    elementGap: 10,
    showDividers: false,
    showFooterBorder: false,
    navStyle: 'muted',
    tagSeparator: ', ',
    context: 'light'
  },
  bauhaus: {
    textColor: '#000000',
    bgColor: '#ffffff',
    accentColor: '#cc0000',
    mutedColor: '#555555',
    dividerColor: '#000000',
    fontFamily: "system-ui, -apple-system, sans-serif",
    baseFontSize: 15,
    headingScale: 2.8,
    lineHeight: 1.5,
    headingWeight: '700',
    letterSpacing: -0.03,
    containerWidth: 720,
    sectionPadding: 40,
    hPadding: 24,
    elementGap: 8,
    showDividers: true,
    showFooterBorder: true,
    navStyle: 'text',
    tagSeparator: ' / ',
    context: 'light'
  },
  warm: {
    textColor: '#2c2418',
    bgColor: '#faf8f5',
    accentColor: '#8b6f47',
    mutedColor: '#7a6e5e',
    dividerColor: '#e8e0d4',
    fontFamily: "'Inter', system-ui, sans-serif",
    baseFontSize: 16,
    headingScale: 2.25,
    lineHeight: 1.65,
    headingWeight: '600',
    letterSpacing: -0.02,
    containerWidth: 680,
    sectionPadding: 52,
    hPadding: 28,
    elementGap: 12,
    showDividers: true,
    showFooterBorder: true,
    navStyle: 'muted',
    tagSeparator: ' · ',
    context: 'light'
  },
  tight: {
    textColor: '#1a1a1a',
    bgColor: '#ffffff',
    accentColor: '#3b82f6',
    mutedColor: '#71717a',
    dividerColor: '#e4e4e7',
    fontFamily: "'Inter', system-ui, sans-serif",
    baseFontSize: 14,
    headingScale: 2.0,
    lineHeight: 1.5,
    headingWeight: '600',
    letterSpacing: -0.015,
    containerWidth: 600,
    sectionPadding: 32,
    hPadding: 20,
    elementGap: 8,
    showDividers: true,
    showFooterBorder: true,
    navStyle: 'accent',
    tagSeparator: ' · ',
    context: 'light'
  }
};

function fontLabel(family) {
  if (family.includes('Inter')) return 'Inter';
  if (family.includes('IBM Plex')) return 'IBM Plex Sans';
  if (family.includes('Georgia')) return 'Georgia';
  if (family.includes('Literata')) return 'Literata';
  return 'System UI';
}

function updateColor(id) {
  const val = document.getElementById(id).value;
  state[id] = val;
  document.getElementById(id + 'Hex').textContent = val;
  updateAll();
}

function updateState() {
  state.fontFamily = document.getElementById('fontFamily').value;
  state.baseFontSize = +document.getElementById('baseFontSize').value;
  state.headingScale = +document.getElementById('headingScale').value;
  state.lineHeight = +document.getElementById('lineHeight').value;
  state.headingWeight = document.getElementById('headingWeight').value;
  state.letterSpacing = +document.getElementById('letterSpacing').value;
  state.containerWidth = +document.getElementById('containerWidth').value;
  state.sectionPadding = +document.getElementById('sectionPadding').value;
  state.hPadding = +document.getElementById('hPadding').value;
  state.elementGap = +document.getElementById('elementGap').value;
  state.showDividers = document.getElementById('showDividers').checked;
  state.showFooterBorder = document.getElementById('showFooterBorder').checked;
  state.navStyle = document.getElementById('navStyle').value;
  state.tagSeparator = document.getElementById('tagSeparator').value;

  // Update value displays
  document.getElementById('baseFontSizeVal').textContent = state.baseFontSize + 'px';
  document.getElementById('headingScaleVal').textContent = state.headingScale.toFixed(1) + '×';
  document.getElementById('lineHeightVal').textContent = state.lineHeight.toFixed(2);
  document.getElementById('letterSpacingVal').textContent = state.letterSpacing.toFixed(3) + 'em';
  document.getElementById('containerWidthVal').textContent = state.containerWidth + 'px';
  document.getElementById('sectionPaddingVal').textContent = state.sectionPadding + 'px';
  document.getElementById('hPaddingVal').textContent = state.hPadding + 'px';
  document.getElementById('elementGapVal').textContent = state.elementGap + 'px';

  // Clear active preset
  document.querySelectorAll('.preset-btn').forEach(b => b.classList.remove('active'));

  updateAll();
}

function applyPreset(name) {
  const p = PRESETS[name];
  Object.assign(state, p);

  // Sync controls
  document.getElementById('textColor').value = p.textColor;
  document.getElementById('textColorHex').textContent = p.textColor;
  document.getElementById('bgColor').value = p.bgColor;
  document.getElementById('bgColorHex').textContent = p.bgColor;
  document.getElementById('accentColor').value = p.accentColor;
  document.getElementById('accentColorHex').textContent = p.accentColor;
  document.getElementById('mutedColor').value = p.mutedColor;
  document.getElementById('mutedColorHex').textContent = p.mutedColor;
  document.getElementById('dividerColor').value = p.dividerColor;
  document.getElementById('dividerColorHex').textContent = p.dividerColor;

  // Find matching font option
  const fontSelect = document.getElementById('fontFamily');
  for (let i = 0; i < fontSelect.options.length; i++) {
    if (fontSelect.options[i].value === p.fontFamily) {
      fontSelect.selectedIndex = i;
      break;
    }
  }

  document.getElementById('baseFontSize').value = p.baseFontSize;
  document.getElementById('baseFontSizeVal').textContent = p.baseFontSize + 'px';
  document.getElementById('headingScale').value = p.headingScale;
  document.getElementById('headingScaleVal').textContent = p.headingScale.toFixed(1) + '×';
  document.getElementById('lineHeight').value = p.lineHeight;
  document.getElementById('lineHeightVal').textContent = p.lineHeight.toFixed(2);
  document.getElementById('headingWeight').value = p.headingWeight;
  document.getElementById('letterSpacing').value = p.letterSpacing;
  document.getElementById('letterSpacingVal').textContent = p.letterSpacing.toFixed(3) + 'em';
  document.getElementById('containerWidth').value = p.containerWidth;
  document.getElementById('containerWidthVal').textContent = p.containerWidth + 'px';
  document.getElementById('sectionPadding').value = p.sectionPadding;
  document.getElementById('sectionPaddingVal').textContent = p.sectionPadding + 'px';
  document.getElementById('hPadding').value = p.hPadding;
  document.getElementById('hPaddingVal').textContent = p.hPadding + 'px';
  document.getElementById('elementGap').value = p.elementGap;
  document.getElementById('elementGapVal').textContent = p.elementGap + 'px';
  document.getElementById('showDividers').checked = p.showDividers;
  document.getElementById('showFooterBorder').checked = p.showFooterBorder;
  document.getElementById('navStyle').value = p.navStyle;
  document.getElementById('tagSeparator').value = p.tagSeparator;

  // Set context
  setContext(p.context, true);

  // Mark preset active
  document.querySelectorAll('.preset-btn').forEach(b => b.classList.remove('active'));
  document.querySelector(`[onclick="applyPreset('${name}')"]`).classList.add('active');

  updateAll();
}

function setContext(ctx, skipUpdate) {
  state.context = ctx;
  document.getElementById('ctx-light').classList.toggle('active', ctx === 'light');
  document.getElementById('ctx-dark').classList.toggle('active', ctx === 'dark');
  if (!skipUpdate) updateAll();
}

function renderPreview() {
  const el = document.getElementById('preview');
  const frame = document.getElementById('previewFrame');

  const bg = state.context === 'dark' ? invertLightness(state.bgColor) : state.bgColor;
  const text = state.context === 'dark' ? invertLightness(state.textColor) : state.textColor;
  const muted = state.context === 'dark' ? lightenForDark(state.mutedColor) : state.mutedColor;
  const accent = state.context === 'dark' ? lightenForDark(state.accentColor) : state.accentColor;
  const divider = state.context === 'dark' ? 'rgba(255,255,255,0.12)' : state.dividerColor;

  const headingSize = state.baseFontSize * state.headingScale;
  const sectionTitleSize = state.baseFontSize * 1.125;
  const smallSize = state.baseFontSize * 0.875;

  frame.style.maxWidth = (state.containerWidth + state.hPadding * 2 + 40) + 'px';
  frame.style.background = bg;

  el.style.fontFamily = state.fontFamily;
  el.style.fontSize = state.baseFontSize + 'px';
  el.style.lineHeight = state.lineHeight;
  el.style.color = text;
  el.style.padding = state.sectionPadding + 'px ' + state.hPadding + 'px';

  // Header
  el.querySelector('.site-name').style.cssText = `font-size: ${state.baseFontSize}px; color: ${text}; font-weight: 600;`;
  el.querySelectorAll('.nav-link').forEach(a => {
    const navColor = state.navStyle === 'muted' ? muted : state.navStyle === 'accent' ? accent : text;
    a.style.cssText = `color: ${navColor}; font-size: ${state.baseFontSize}px;`;
  });

  // Hero
  el.querySelector('.hero h1').style.cssText = `
    font-size: ${headingSize}px;
    font-weight: ${state.headingWeight};
    letter-spacing: ${state.letterSpacing}em;
    line-height: 1.1;
    color: ${text};
    margin-bottom: ${state.elementGap}px;
  `;
  el.querySelector('.hero-desc').style.cssText = `
    color: ${muted};
    font-size: ${state.baseFontSize}px;
    line-height: ${state.lineHeight};
    max-width: 520px;
  `;
  el.querySelector('.hero').style.marginBottom = state.sectionPadding + 'px';

  // Section titles
  el.querySelectorAll('.section-title').forEach(t => {
    t.style.cssText = `
      font-size: ${sectionTitleSize}px;
      font-weight: 600;
      color: ${text};
      padding-bottom: 8px;
      margin-bottom: ${state.elementGap + 4}px;
      border-bottom: ${state.showDividers ? '1px solid ' + divider : 'none'};
    `;
  });

  // Projects
  el.querySelectorAll('.project-title').forEach(t => {
    t.style.cssText = `font-weight: 500; color: ${text}; font-size: ${state.baseFontSize}px;`;
  });
  el.querySelectorAll('.project-desc').forEach(t => {
    t.style.cssText = `color: ${muted}; font-size: ${state.baseFontSize}px; line-height: ${state.lineHeight};`;
  });
  el.querySelectorAll('.project-tags').forEach(t => {
    t.style.cssText = `color: ${muted}; font-size: ${smallSize}px;`;
    // Update separator
    const tags = t.textContent.split(/\s*[·/,]\s*/).map(s => s.trim()).filter(Boolean);
    t.textContent = tags.join(state.tagSeparator);
  });

  // Experience section
  el.querySelector('.experience-section').style.marginTop = state.sectionPadding + 'px';

  // Footer
  const footer = el.querySelector('.footer-area');
  footer.style.cssText = `
    margin-top: ${state.sectionPadding}px;
    padding-top: ${state.elementGap + 4}px;
    display: flex;
    gap: 24px;
    border-top: ${state.showFooterBorder ? '1px solid ' + divider : 'none'};
  `;
  footer.querySelectorAll('a').forEach(a => {
    a.style.cssText = `color: ${accent}; font-size: ${smallSize}px;`;
  });
}

function updatePrompt() {
  const parts = [];
  const cssParts = [];

  // Colors
  const colorChanges = [];
  if (state.textColor !== DEFAULTS.textColor) colorChanges.push(`text color to ${state.textColor}`);
  if (state.bgColor !== DEFAULTS.bgColor) colorChanges.push(`background to ${state.bgColor}`);
  if (state.accentColor !== DEFAULTS.accentColor) colorChanges.push(`accent color to ${state.accentColor}`);
  if (state.mutedColor !== DEFAULTS.mutedColor) colorChanges.push(`muted text to ${state.mutedColor}`);
  if (state.dividerColor !== DEFAULTS.dividerColor) colorChanges.push(`dividers to ${state.dividerColor}`);
  if (colorChanges.length) parts.push('Change ' + colorChanges.join(', ') + '.');

  // Typography
  const typeChanges = [];
  if (state.fontFamily !== DEFAULTS.fontFamily) typeChanges.push(`font to ${fontLabel(state.fontFamily)}`);
  if (state.baseFontSize !== DEFAULTS.baseFontSize) typeChanges.push(`base font size to ${state.baseFontSize}px`);
  if (state.headingScale !== DEFAULTS.headingScale) typeChanges.push(`heading size to ${(state.baseFontSize * state.headingScale).toFixed(0)}px (${state.headingScale}× scale)`);
  if (state.lineHeight !== DEFAULTS.lineHeight) typeChanges.push(`body line-height to ${state.lineHeight.toFixed(2)}`);
  if (state.headingWeight !== DEFAULTS.headingWeight) typeChanges.push(`heading weight to ${state.headingWeight}`);
  if (state.letterSpacing !== DEFAULTS.letterSpacing) typeChanges.push(`heading letter-spacing to ${state.letterSpacing.toFixed(3)}em`);
  if (typeChanges.length) parts.push('Set ' + typeChanges.join(', ') + '.');

  // Spacing
  const spaceChanges = [];
  if (state.containerWidth !== DEFAULTS.containerWidth) spaceChanges.push(`container max-width to ${state.containerWidth}px`);
  if (state.sectionPadding !== DEFAULTS.sectionPadding) spaceChanges.push(`section vertical padding to ${state.sectionPadding}px`);
  if (state.hPadding !== DEFAULTS.hPadding) spaceChanges.push(`horizontal padding to ${state.hPadding}px`);
  if (state.elementGap !== DEFAULTS.elementGap) spaceChanges.push(`element spacing to ${state.elementGap}px`);
  if (spaceChanges.length) parts.push('Adjust ' + spaceChanges.join(', ') + '.');

  // Details
  if (state.showDividers !== DEFAULTS.showDividers) parts.push(state.showDividers ? 'Add section dividers.' : 'Remove section dividers.');
  if (state.showFooterBorder !== DEFAULTS.showFooterBorder) parts.push(state.showFooterBorder ? 'Add footer border.' : 'Remove footer border.');
  if (state.navStyle !== DEFAULTS.navStyle) parts.push(`Style nav links as ${state.navStyle === 'muted' ? 'muted/secondary text' : state.navStyle === 'accent' ? 'accent-colored' : 'plain text'}.`);
  if (state.tagSeparator !== DEFAULTS.tagSeparator) {
    const sepNames = { ' · ': 'middle dot (·)', ' / ': 'slash (/)', ', ': 'comma', '  ': 'spaces' };
    parts.push(`Use ${sepNames[state.tagSeparator] || state.tagSeparator} as tag separator.`);
  }

  // CSS custom properties
  cssParts.push('--color-text: ' + state.textColor);
  cssParts.push('--color-bg: ' + state.bgColor);
  cssParts.push('--color-accent: ' + state.accentColor);
  cssParts.push('--color-muted: ' + state.mutedColor);
  cssParts.push('--color-divider: ' + state.dividerColor);

  if (parts.length === 0) {
    document.getElementById('promptOutput').textContent = 'Current design matches defaults. Adjust controls to generate changes.';
    return;
  }

  const prompt = `Update the design system for aberghammer.com:\n\n${parts.join(' ')}\n\nCSS custom properties:\n${cssParts.map(p => '  ' + p + ';').join('\n')}`;
  document.getElementById('promptOutput').textContent = prompt;
}

function updateAll() {
  renderPreview();
  updatePrompt();
}

function copyPrompt() {
  const text = document.getElementById('promptOutput').textContent;
  navigator.clipboard.writeText(text).then(() => {
    const btn = document.getElementById('copyBtn');
    btn.textContent = 'Copied!';
    btn.classList.add('copied');
    setTimeout(() => {
      btn.textContent = 'Copy Prompt';
      btn.classList.remove('copied');
    }, 1500);
  });
}

// Color utility for dark mode preview
function invertLightness(hex) {
  const r = parseInt(hex.slice(1,3), 16);
  const g = parseInt(hex.slice(3,5), 16);
  const b = parseInt(hex.slice(5,7), 16);
  return '#' + [255-r, 255-g, 255-b].map(c => c.toString(16).padStart(2, '0')).join('');
}

function lightenForDark(hex) {
  const r = Math.min(255, parseInt(hex.slice(1,3), 16) + 80);
  const g = Math.min(255, parseInt(hex.slice(3,5), 16) + 80);
  const b = Math.min(255, parseInt(hex.slice(5,7), 16) + 80);
  return '#' + [r, g, b].map(c => Math.round(c).toString(16).padStart(2, '0')).join('');
}

// Load Google Fonts for preview
const link = document.createElement('link');
link.rel = 'stylesheet';
link.href = 'https://fonts.googleapis.com/css2?family=Inter:wght@100..900&family=IBM+Plex+Sans:wght@400;500;600;700&family=Literata:wght@400;500;600;700&display=swap';
document.head.appendChild(link);

// Initial render
updateAll();
</script>

</body>
</html>
